# Test generated by RoostGPT for test credwallet-integration-artillery using AI Type Open AI and AI Model gpt-4


config:
  target: "http://localhost:8080"
  plugins:
    expect: {}
  payload:
    fields:
      - accounts_body
  phases:
    - duration: 60
      arrivalRate: 20

scenarios:
  - name: "Create my account"
    flow:
      # This step sends a POST request to create an account
      - post:
          url: "/accounts"
          headers:
            commit-hash: "{{ commitHash }}"
          json:
            accounts_body: "{{ accounts_body }}"
          expect:
            # Expect a 201 status code which means the account was created successfully
            - statusCode: 201
            # Expect the response to have an 'email' property since it is part of the account details
            - hasProperty: ["email"]

      # A delay to simulate think time
      - think: 3

      # This step sends a GET request to verify the account was created successfully
      - get:
          url: "/me"
          headers:
            Token: "{{ token }}"
          expect:
            # Expect a 200 status code which means the account details were retrieved successfully
            - statusCode: 200
            # Expect the response to contain these properties as they are part of the account details
            - hasProperty: ["id", "email", "settings", "createdAt", "updatedAt"]

      # Log a message to indicate the account was created and verified successfully
      - log: "Account created and verified successfully"
